<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src/datepicker/datepicker.js - Pocketknife UI</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/css/custom.css" id="site_custom">
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">
<div class="github-fork-ribbon-wrapper right">
    <div class="github-fork-ribbon">
        <a href="https://github.com/sw4/pocketknife/" target="_new"><i class='fa fa-github' style='margin-right:10px;'></i>Contribute!</a>
    </div>
</div>
<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="Pocketknife UI"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.1</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/pk.html">pk</a></li>
            
                <li><a href="../classes/pk.accordian.html">pk.accordian</a></li>
            
                <li><a href="../classes/pk.carousel.html">pk.carousel</a></li>
            
                <li><a href="../classes/pk.checkbox.html">pk.checkbox</a></li>
            
                <li><a href="../classes/pk.color.html">pk.color</a></li>
            
                <li><a href="../classes/pk.colorpicker.html">pk.colorpicker</a></li>
            
                <li><a href="../classes/pk.datepicker.html">pk.datepicker</a></li>
            
                <li><a href="../classes/pk.drag.html">pk.drag</a></li>
            
                <li><a href="../classes/pk.modal.html">pk.modal</a></li>
            
                <li><a href="../classes/pk.notify.html">pk.notify</a></li>
            
                <li><a href="../classes/pk.rating.html">pk.rating</a></li>
            
                <li><a href="../classes/pk.scroll.html">pk.scroll</a></li>
            
                <li><a href="../classes/pk.select.html">pk.select</a></li>
            
                <li><a href="../classes/pk.slider.html">pk.slider</a></li>
            
                <li><a href="../classes/pk.switch.html">pk.switch</a></li>
            
                <li><a href="../classes/pk.toggle.html">pk.toggle</a></li>
            
                <li><a href="../classes/pk.tooltip.html">pk.tooltip</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/pocketknife.html">pocketknife</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src/datepicker/datepicker.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
var pk = pk || {};
/**
Create a new datepicker control

HTML

    &lt;div id=&#x27;datepicker&#x27;&gt;&lt;/div&gt;

Javascript

	pk.datepicker({
		element: document.getElementById(&#x27;datepicker&#x27;)
	});	
			
	
@class pk.datepicker
@constructor
@param options {Object}
@param options.element {Object} DOM element to convert to control
@param [options.value=0] {String} Value of initially selected option, defaults to the attribute value set on the passed element, or &#x60;0&#x60;
@param [options.name=pk-select-RandInt] {String} Name of underlying input control, defaults to the attribute value set on the passed element, or &#x60;pk-select-RandInt&#x60;
@param [options.tabindex=0] {Number} Tabindex of control, defaults to the attribute value set on the passed element, or &#x60;0&#x60;
@param [options.disabled=false] {Boolean} Disabled state of control, defaults to the attribute value set on the passed element, or &#x60;false&#x60;
@return Object {Object} Consisting of original DOM element (item &#x60;0&#x60;) and class methods (see below)
@chainable
*/
(function(pk) {
    pk.datepicker = function(opt) {
		var y = opt.year || 2014,
			m = opt.month || 11,
			d = opt.day || 1,
			weekday={
				s:[&#x27;M&#x27;,&#x27;T&#x27;,&#x27;W&#x27;,&#x27;T&#x27;,&#x27;F&#x27;,&#x27;S&#x27;,&#x27;S&#x27;],
				m:[&#x27;Mon&#x27;,&#x27;Tue&#x27;,&#x27;Wed&#x27;,&#x27;Thu&#x27;,&#x27;Fri&#x27;,&#x27;Sat&#x27;,&#x27;Sun&#x27;], 
				l:[&#x27;Monday&#x27;,&#x27;Tuesday&#x27;,&#x27;Wednesday&#x27;,&#x27;Thursday&#x27;,&#x27;Friday&#x27;,&#x27;Saturday&#x27;,&#x27;Sunday&#x27;]		
			},
			month={
				m:[&#x27;Jan&#x27;,&#x27;Feb&#x27;,&#x27;Mar&#x27;,&#x27;Apr&#x27;,&#x27;May&#x27;,&#x27;Jun&#x27;,&#x27;Jul&#x27;,&#x27;Aug&#x27;,&#x27;Sep&#x27;,&#x27;Oct&#x27;,&#x27;Nov&#x27;,&#x27;Dec&#x27;]		
			},
			tpl=&quot;&lt;div class=&#x27;pk-datepicker&#x27;&gt;&lt;/div&gt;&quot;,			
			el=opt.element,
			yearEl=null,
			yearsEl=null,
			monthEl=null,
			daysEl=null,
			sD=0,
			eD=0,
			pD=0;
		el=pk.replaceEl(el, tpl);		
		function parseDate(){
			function normalizeDay(v){
				if(v===0){
					return 6;
				}else{
					return v-1;
				}				
			}
			var obj= {		
				weekday:normalizeDay(new Date(y, m-1, d).getDay()),
				startday:normalizeDay(new Date(y, m-1, 1).getDay()),
				endday:new Date(y, m, 0).getDate(),
				prevend:new Date(y, m-1, 0).getDate(),
				nextend:new Date(y, (m===11 ? 0 : m+1), 0).getDate(),
				date:new Date(y, m-1, d)
			}
			return obj; 
		}
		
		function createDays(){
			sD=parseDate().startday,
			eD=parseDate().endday, 
			pD=parseDate().prevend; 	
				
			sD = sD == 0 ? sD = 7 : sD;
			tpl=&quot;&lt;thead&gt;&lt;tr&gt;&quot;;
			for(var w=0;w&lt;7;w++){		
				tpl+=&quot;&lt;th&gt;&quot;+weekday.m[w]+&quot;&lt;/th&gt;&quot;;
			}
			tpl+=&quot;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&quot;;		
			for(var c=0;c&lt;42;c++){		
				if(c%7 === 0){
					tpl+=&quot;&lt;tr&gt;&quot;;
				}
				if(c&gt;=sD &amp;&amp; c&lt;=eD+sD-1){
					tpl+=&quot;&lt;td data-day=&#x27;&quot;+(c-sD+1)+&quot;&#x27;&gt;&quot;+(c-sD+1)+&quot;&lt;/td&gt;&quot;;
				}else if(c&lt;sD){
					tpl+=&quot;&lt;td class=&#x27;pk-prev&#x27; data-day=&#x27;&quot;+(pD-(sD-c-1))+&quot;&#x27; data-month=&#x27;&quot;+(m-2 &lt; 0 ? 11 : m-2)+&quot;&#x27; &quot;+(m-2 &lt; 0 ? &quot;data-year=&#x27;&quot;+(y-1)+&quot;&#x27;&quot;: &#x27;&#x27;)+&quot;&gt;&quot;+(pD-(sD-c-1))+&quot;&lt;/td&gt;&quot;; 
				}else{
					tpl+=&quot;&lt;td class=&#x27;pk-next&#x27; data-day=&#x27;&quot;+(c-sD-eD+1)+&quot;&#x27; data-month=&#x27;&quot;+(m===12 ? 0 : m)+&quot;&#x27; &quot;+(m===12 ? &quot;data-year=&#x27;&quot;+(y+1)+&quot;&#x27;&quot;: &#x27;&#x27;)+&quot;&gt;&quot;+(c-sD-eD+1)+&quot;&lt;/td&gt;&quot;; 
				}
				if(c%7 === 6){
					tpl+=&quot;&lt;/tr&gt;&quot;;
				}
			}
			tpl+=&quot;&lt;/tbody&gt;&quot;; 	
			daysEl.innerHTML=tpl;
			setDay();			
		}
		
		
		function createYears(){
		
			for(i=0;i&lt;55;i++){
				if(i%5 === 0){
					tpl+=&quot;&lt;tr&gt;&quot;;					
				}
				tpl+=&quot;&lt;td&gt;&quot;+(y+i)+&quot;&lt;/td&gt;&quot;;	 
				if(i%5 === 4){
					tpl+=&quot;&lt;/tr&gt;&quot;;				
				}
			}		
			yearsEl.innerHTML=tpl;
		}
		
		metaEl=pk.createEl(&quot;&lt;div class=&#x27;pk-datepicker-meta&#x27;&gt;&quot;+666+&quot;&lt;/div&gt;&quot;);
		el.appendChild(metaEl);			
		yearEl=pk.createEl(&quot;&lt;div class=&#x27;pk-datepicker-year&#x27;&gt;&quot;+y+&quot;&lt;/div&gt;&quot;);
		el.appendChild(yearEl);
		
		tpl=&quot;&lt;ul class=&#x27;pk-datepicker-month&#x27;&gt;&quot;;
		for(var n=0;n&lt;12;n++){		
			tpl+=&quot;&lt;li data-month=&#x27;&quot;+n+&quot;&#x27;&gt;&quot;+month.m[n]+&quot;&lt;/li&gt;&quot;;
		}
		tpl+=&quot;&lt;/ul&gt;&quot;;
		monthEl=pk.createEl(tpl);
		el.appendChild(monthEl);	
		
		
		tpl=&quot;&lt;table class=&#x27;pk-datepicker-day&#x27;&gt;&lt;/table&gt;&quot;;
		daysEl=pk.createEl(tpl);
		el.appendChild(daysEl);		
		
			
		yearsEl=pk.createEl(&quot;&lt;table class=&#x27;pk-datepicker-years&#x27;&gt;&lt;/table&gt;&quot;);
		el.appendChild(yearsEl); 
		createYears();
		
		setMeta();
		setYear();
		
		function setMeta(){
			function getSuffix(n) {return n + (n &lt; 11 || n &gt; 13 ? [&#x27;st&#x27;, &#x27;nd&#x27;, &#x27;rd&#x27;, &#x27;th&#x27;][Math.min((n - 1) % 10, 3)] : &#x27;th&#x27;);}
			var mDate=parseDate();
			metaEl.innerHTML=weekday.l[mDate.weekday]+&quot; &quot;+getSuffix(mDate.date.getDate())+&quot; &quot;+month.m[mDate.date.getMonth()]+&quot; &quot;+mDate.date.getFullYear();
		}
		function setYear(){		
			yearEl.innerHTML=y;
			setMonth();
		}		
		function setMonth(){		
			for(var n=0;n&lt;12;n++){			
				pk.removeClass(monthEl.children[n], &#x27;selected&#x27;);
			}
			pk.addClass(monthEl.children[m-1], &#x27;selected&#x27;);
			createDays();	
		}
		function setDay(){	
			var i=0;
			for(w=0;w&lt;6;w++){
				for(c=0;c&lt;7;c++){
					i++;	 				
					pk.removeClass(daysEl.children[1].children[w].children[c], &#x27;selected&#x27;);
					if(i===sD+d){
						pk.addClass(daysEl.children[1].children[w].children[c], &#x27;selected&#x27;);
					}
				}		
			}
		}				
		function resolveClick(e){
			var tEl=e.target;
			if(pk.attribute(tEl, &#x27;year&#x27;)!==null){ 			
				y=parseInt(pk.attribute(tEl, &#x27;year&#x27;),0);	
				setYear();		
			}			
			if(pk.attribute(tEl, &#x27;month&#x27;)!==null){
				m=parseInt(pk.attribute(tEl, &#x27;month&#x27;),0)+1;		
				setMonth();				
			}
			if(pk.attribute(tEl, &#x27;day&#x27;)!==null){ 			
				d=parseInt(pk.attribute(tEl, &#x27;day&#x27;),0);		
				setDay();
			}
			setMeta();
		}
		pk.bindEvent(&#x27;click&#x27;, el, resolveClick);	

		pk.bindEvent(&quot;mousewheel&quot;, yearEl, function(e) { 
			pk.preventBubble(e);
			if (e.wheelDelta &gt; 0 || e.detail &lt; 0) {
				y++
            }else{ 
				y--; 
			}
			setYear();
			setMeta();
		});		
		pk.bindEvent(&quot;mousewheel&quot;, monthEl, function(e) { 
			pk.preventBubble(e);
			if (e.wheelDelta &gt; 0 || e.detail &lt; 0) {
				d=d &gt; parseDate().nextend ? parseDate().nextend : d;
				if(m===12){
					m=1;
					y++;
				}else{
					m++;
				}
            }else{
				d=d &gt; parseDate().prevend ? parseDate().prevend : d;
				if(m===1){
					m=12;
					y--;
				}else{
					m--;
				}
			}
			setYear();
			setMeta();
		});
		pk.bindEvent(&quot;mousewheel&quot;, daysEl, function(e) { 
		 	pk.preventBubble(e); 
			if (e.wheelDelta &gt; 0 || e.detail &lt; 0) {
				if(d===eD){				
					d=1;
					if(m===12){
						m=1;
						y++;
						setYear();
					}else{
						m++;
						setMonth();
					}
				}else{
					d++;
					setDay();
				}
            }else{
				if(d===1){				
					d=parseDate().prevend;
					if(m===1){
						m=12;
						y--;
						setYear();
					}else{
						m--;
						setMonth();
					}
				}else{
					d--;
					setDay();
				}
			}
			setMeta();
        });
		return {
			0:el		
		}
		
    };
    return pk;
})(pk);

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
